# CLAUDE.md

Instructions for AI assistants working on this project.

## Project Overview

1000 Design Vibes generates unique, self-contained design system showcases. Each design is an HTML file that works as both a visual demo and LLM-readable documentation.

**Key insight**: Designs are generated by Claude Code subagents, not API calls. This produces higher quality output.

## Workflow

```bash
# 1. Create a manifest with design seeds
python design_vibes.py manifest --count 100 --name "batch1"

# 2. Generate designs (Claude Code spawns subagents)
# User asks: "Generate designs for outputs/2026-01-06-batch1"

# 3. Check progress
python design_vibes.py status --path outputs/2026-01-06-batch1

# 4. Browse designs
open outputs/2026-01-06-batch1/index.html
```

## Generating Designs

When asked to generate designs, follow `.claude/skills/generate-designs.md`:

1. Read the manifest to find pending designs
2. Create `.staging/` folder if needed
3. Spawn 3-5 design agents in parallel using Task tool
4. Each agent reads `DESIGN_GUIDE.md` and writes to `.staging/`
5. Validate outputs (has DOCTYPE, style tags, not empty)
6. Move valid designs from `.staging/` to `designs/`
7. Log failures to `failures.json`
8. Rebuild the index
9. Repeat until all designs complete

### Spawning a Design Agent

```
Task tool with subagent_type="general-purpose":

You are generating design #{id} for the 1000 Design Vibes project.

First, read DESIGN_GUIDE.md for complete instructions.

Design: {name}
Tagline: {tagline}

Dimensions:
  ui_paradigm: {value}
  design_era: {value}
  [etc.]

Write to: outputs/{batch}/.staging/design-{id}.html

Generate a COMPLETE HTML file. Do not truncate.
```

## Architecture

### Key Files

| File | Purpose |
|------|---------|
| `design_vibes.py` | CLI entry point (manifest, status) |
| `DESIGN_GUIDE_LOOSE.md` | Instructions for design agents (primary) |
| `DESIGN_GUIDE.md` | Strict instructions (original) |
| `src/dimensions.py` | All 35 dimension definitions |
| `src/manifest.py` | Manifest generation logic |
| `src/naming.py` | Rule-based name generation |
| `src/index.py` | Gallery index builder |
| `src/status.py` | Progress reporting |
| `.claude/skills/generate-designs.md` | Orchestrator skill |

### Output Structure

```
outputs/{date}-{name}/
  manifest.json     # Design seeds
  index.html        # Gallery
  failures.json     # Failed attempts
  .staging/         # In-progress designs
  designs/          # Completed designs
```

## Development Guidelines

### Code Style

- All files start with 2-line `# ABOUTME:` comment
- Match existing patterns
- Keep dependencies minimal

### Testing

```bash
# Generate a test manifest
python design_vibes.py manifest --count 5 --name "dev-test"

# Check it worked
python design_vibes.py status --path outputs/2026-01-06-dev-test
```

### Key Design Decisions

1. **Claude Code agents** - Not API calls; higher quality output
2. **Self-contained HTML** - Only Google Fonts as external dep
3. **Date-stamped outputs** - Each run isolated
4. **Staging folder** - Validate before accepting
5. **Parallel agents** - 3-5 at a time for speed
6. **Functional direction is primary** - The `functional_direction` dimension drives page structure and required components, not just styling. A dashboard must look like a dashboard.

## Key Docs

- [Agent Architecture](docs/plans/2026-01-06-agent-architecture-design.md)
- [Roadmap](docs/ROADMAP.md)

## PRD Reference

Original requirements in:
- `01-manifest-generator-prd.md` - Manifest structure
- `02-design-page-generator-prd.md` - HTML page requirements
- `03-prompt-templates.md` - Prompt templates
