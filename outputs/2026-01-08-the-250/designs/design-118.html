<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deco Surge - Art Deco Calculator Design System</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Cormorant+Garamond:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
/*
DESIGN: Deco Surge - Art deco design with natural neutral tones
ABOUTME: This design system implements a calculator with art deco aesthetics.
ABOUTME: Key characteristics: Geometric symmetry, stepped forms, luxury gold accents on dark backgrounds.

QUICK START - Copy these variables to apply this design:
--color-primary: #d4af37;
--color-secondary: #8b7355;
--color-background: #1a1511;
--color-surface: #2d2419;
--color-surface-elevated: #3d3225;
--color-text: #f5f1e8;
--color-text-muted: #b8a896;
--color-accent: #cd853f;
--color-display: #0f0d0a;
--font-heading: 'Playfair Display', serif;
--font-body: 'Cormorant Garamond', serif;
--radius-default: 2px;
--space-unit: 8px;

AESTHETIC PRINCIPLES:
1. Art Deco Geometry - Stepped borders, chevron patterns, and symmetric layouts echo 1920s luxury
2. Golden Ratio Proportions - Display height, button spacing, and overall layout follow classical ratios
3. Elegant Typography - Sophisticated serifs and generous letter-spacing create refined hierarchy
4. Rich Material Palette - Deep browns and natural tans with metallic gold accents suggest quality craftsmanship
5. High Contrast Layering - Multiple elevation levels with geometric borders create dramatic depth

DESIGN VOCABULARY:
- Stepped geometric borders (art deco signature)
- Chevron and zigzag accent patterns
- Symmetric radial layouts for button grids
- Gold metallic highlights on dark neutral backgrounds
- Elegant serif typography with refined spacing
- Sunburst and fan motifs

BEST FOR:
- Healthcare calculation tools requiring professional precision
- Medical dosage calculators where accuracy is paramount
- Financial healthcare applications
- Premium professional tools where elegance matters
- Applications requiring confident, energetic interaction
- Luxury service interfaces in medical or wellness contexts

AVOID IF:
- Your users expect minimal, flat modern aesthetics
- You need rapid data entry without visual flourish
- The context is casual or playful
- Screen real estate is severely limited
- You need to support extremely bright environments

FUNCTIONAL DIRECTION: calculator
This design must clearly function as a calculator. Required elements:
- Numeric keypad (0-9) with clear visual hierarchy
- Basic operation buttons (+, -, ×, ÷)
- Display area showing current input and results
- Clear/Reset functionality
- Equals button prominently featured
- Decimal point input
- Additional functions relevant to healthcare context (%, memory functions)

HEALTHCARE CONTEXT:
Since this calculator targets the healthcare industry, additional considerations:
- Medical dosage calculation shortcuts
- Unit conversion helpers (mg, mL, kg, lb)
- Memory functions for storing patient-specific values
- High precision decimal handling
- Clear error states for safety-critical calculations
- Professional color scheme suitable for clinical environments

COLOR MODE: dark_only
All color choices optimize for dark mode viewing with natural neutral tones.
Gold accents provide energetic highlights while maintaining sophisticated restraint.

EMOTIONAL TONE: energetic
Despite the refined art deco aesthetic, interaction patterns are confident and responsive.
Button presses feel immediate and satisfying. Color changes are bold but controlled.
The golden accents create visual excitement without compromising professional credibility.

DESIGN ERA: art_deco
Art Deco (1920s-1930s) emphasized:
- Streamlined geometric forms
- Symmetrical compositions
- Luxury materials (gold, rich woods, fine textiles)
- Stepped and zigzag patterns
- Sunburst and fountain motifs
- Glamour and optimism
- Craftsmanship and quality

This calculator brings those principles to a modern healthcare tool.
*/

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Colors - Art Deco Natural Neutral Palette */
            --color-primary: #d4af37;
            --color-secondary: #8b7355;
            --color-background: #1a1511;
            --color-surface: #2d2419;
            --color-surface-elevated: #3d3225;
            --color-text: #f5f1e8;
            --color-text-muted: #b8a896;
            --color-accent: #cd853f;
            --color-display: #0f0d0a;
            --color-border: #4a3f2f;
            --color-error: #c17a5c;

            /* Typography */
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Cormorant Garamond', serif;

            /* Spacing - Golden Ratio Influenced */
            --space-unit: 8px;
            --space-xs: calc(var(--space-unit) * 0.5);
            --space-sm: var(--space-unit);
            --space-md: calc(var(--space-unit) * 2);
            --space-lg: calc(var(--space-unit) * 3);
            --space-xl: calc(var(--space-unit) * 5);

            /* Shapes */
            --radius-default: 2px;
            --border-width: 2px;
            --border-stepped: 3px;

            /* Shadows - Layered Art Deco Style */
            --shadow-default:
                0 2px 4px rgba(0, 0, 0, 0.3),
                0 4px 8px rgba(0, 0, 0, 0.2);
            --shadow-elevated:
                0 4px 8px rgba(0, 0, 0, 0.4),
                0 8px 16px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(212, 175, 55, 0.1);
            --shadow-inset:
                inset 0 2px 4px rgba(0, 0, 0, 0.4),
                inset 0 -1px 0 rgba(212, 175, 55, 0.05);
        }

        body {
            font-family: var(--font-body);
            background: var(--color-background);
            color: var(--color-text);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image:
                repeating-linear-gradient(
                    0deg,
                    transparent,
                    transparent 2px,
                    rgba(212, 175, 55, 0.02) 2px,
                    rgba(212, 175, 55, 0.02) 4px
                );
        }

        /* Art Deco Header */
        header {
            background: linear-gradient(180deg, var(--color-surface) 0%, var(--color-background) 100%);
            border-bottom: var(--border-stepped) solid var(--color-primary);
            padding: var(--space-lg) var(--space-md);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(212, 175, 55, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        header::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg,
                transparent 0%,
                var(--color-secondary) 25%,
                var(--color-primary) 50%,
                var(--color-secondary) 75%,
                transparent 100%
            );
        }

        h1 {
            font-family: var(--font-heading);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 900;
            text-align: center;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--color-primary);
            text-shadow:
                2px 2px 0 rgba(0, 0, 0, 0.5),
                0 0 20px rgba(212, 175, 55, 0.3);
            position: relative;
            z-index: 1;
        }

        .tagline {
            font-family: var(--font-body);
            font-size: 1rem;
            text-align: center;
            color: var(--color-text-muted);
            margin-top: var(--space-sm);
            letter-spacing: 0.2em;
            font-weight: 300;
            text-transform: uppercase;
        }

        /* Main Calculator Container */
        main {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-xl) var(--space-md);
        }

        .calculator-container {
            width: 100%;
            max-width: 480px;
            background: var(--color-surface);
            border: var(--border-width) solid var(--color-border);
            box-shadow: var(--shadow-elevated);
            position: relative;
        }

        /* Art Deco Corner Ornaments */
        .calculator-container::before,
        .calculator-container::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            border: var(--border-width) solid var(--color-primary);
        }

        .calculator-container::before {
            top: -2px;
            left: -2px;
            border-right: none;
            border-bottom: none;
        }

        .calculator-container::after {
            bottom: -2px;
            right: -2px;
            border-left: none;
            border-top: none;
        }

        /* Stepped Border Frame */
        .calculator-frame {
            border: var(--border-stepped) solid var(--color-surface-elevated);
            margin: var(--space-md);
            padding: var(--space-lg);
            position: relative;
            background: linear-gradient(135deg, var(--color-surface) 0%, #25201a 100%);
        }

        .calculator-frame::before {
            content: '';
            position: absolute;
            top: var(--space-sm);
            left: var(--space-sm);
            right: var(--space-sm);
            bottom: var(--space-sm);
            border: 1px solid rgba(212, 175, 55, 0.2);
            pointer-events: none;
        }

        /* Display Area */
        .display-container {
            background: var(--color-display);
            border: var(--border-width) solid var(--color-border);
            padding: var(--space-md);
            margin-bottom: var(--space-lg);
            box-shadow: var(--shadow-inset);
            position: relative;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .display-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--color-primary), transparent);
        }

        .display-memory {
            font-size: 0.75rem;
            color: var(--color-text-muted);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            font-weight: 600;
            min-height: 1em;
        }

        .display-operation {
            font-size: 1rem;
            color: var(--color-secondary);
            text-align: right;
            font-family: var(--font-heading);
            min-height: 1.5em;
        }

        .display-main {
            font-size: 2.5rem;
            font-family: var(--font-heading);
            font-weight: 700;
            text-align: right;
            color: var(--color-primary);
            letter-spacing: 0.05em;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.4);
            word-break: break-all;
        }

        /* Healthcare Mode Indicator */
        .mode-indicator {
            display: flex;
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
            padding: var(--space-sm);
            background: var(--color-surface-elevated);
            border-left: 3px solid var(--color-accent);
        }

        .mode-badge {
            font-size: 0.7rem;
            padding: var(--space-xs) var(--space-sm);
            background: var(--color-background);
            border: 1px solid var(--color-border);
            color: var(--color-text-muted);
            letter-spacing: 0.1em;
            text-transform: uppercase;
            font-weight: 600;
        }

        .mode-badge.active {
            background: var(--color-primary);
            color: var(--color-background);
            border-color: var(--color-primary);
        }

        /* Button Grid */
        .button-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-sm);
            margin-bottom: var(--space-md);
        }

        /* Base Button Styles */
        .btn {
            font-family: var(--font-heading);
            font-size: 1.25rem;
            font-weight: 600;
            padding: var(--space-md) var(--space-sm);
            background: var(--color-surface-elevated);
            border: var(--border-width) solid var(--color-border);
            color: var(--color-text);
            cursor: pointer;
            position: relative;
            transition: all 0.15s ease;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            letter-spacing: 0.05em;
            box-shadow:
                0 2px 0 rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(212, 175, 55, 0.1);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.05) 0%, transparent 100%);
            pointer-events: none;
        }

        .btn:hover {
            background: var(--color-primary);
            color: var(--color-background);
            border-color: var(--color-primary);
            transform: translateY(-2px);
            box-shadow:
                0 4px 0 rgba(0, 0, 0, 0.4),
                0 0 15px rgba(212, 175, 55, 0.4);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow:
                inset 0 2px 4px rgba(0, 0, 0, 0.4);
        }

        .btn:focus {
            outline: 2px solid var(--color-primary);
            outline-offset: 2px;
        }

        /* Button Variants */
        .btn-operator {
            background: var(--color-secondary);
            border-color: var(--color-secondary);
            color: var(--color-text);
        }

        .btn-operator:hover {
            background: var(--color-primary);
            border-color: var(--color-primary);
        }

        .btn-function {
            font-size: 0.9rem;
            background: var(--color-surface);
            color: var(--color-text-muted);
        }

        .btn-function:hover {
            background: var(--color-accent);
            color: var(--color-text);
        }

        .btn-equals {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: var(--color-background);
            font-weight: 900;
            grid-column: span 2;
        }

        .btn-equals:hover {
            background: var(--color-accent);
            border-color: var(--color-accent);
            box-shadow:
                0 4px 0 rgba(0, 0, 0, 0.4),
                0 0 20px rgba(205, 133, 63, 0.6);
        }

        .btn-zero {
            grid-column: span 2;
        }

        /* Healthcare Functions Row */
        .healthcare-functions {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-xs);
            margin-bottom: var(--space-md);
            padding: var(--space-sm);
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-left: 3px solid var(--color-secondary);
        }

        .healthcare-functions .btn {
            font-size: 0.75rem;
            min-height: 44px;
            padding: var(--space-xs);
            background: var(--color-background);
            letter-spacing: 0.05em;
        }

        /* Memory Functions */
        .memory-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: var(--space-xs);
            margin-bottom: var(--space-md);
        }

        .memory-row .btn {
            font-size: 0.85rem;
            min-height: 44px;
        }

        /* Footer */
        footer {
            background: var(--color-surface);
            border-top: var(--border-stepped) solid var(--color-primary);
            padding: var(--space-lg) var(--space-md);
            text-align: center;
            position: relative;
        }

        footer::before {
            content: '';
            position: absolute;
            top: -3px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg,
                transparent 0%,
                var(--color-secondary) 25%,
                var(--color-primary) 50%,
                var(--color-secondary) 75%,
                transparent 100%
            );
        }

        .footer-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .footer-title {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: var(--color-primary);
            margin-bottom: var(--space-sm);
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .footer-text {
            font-size: 0.95rem;
            color: var(--color-text-muted);
            line-height: 1.8;
            margin-bottom: var(--space-md);
        }

        /* Design Tokens Display */
        .token-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-md);
            margin-top: var(--space-lg);
        }

        .token-card {
            background: var(--color-surface-elevated);
            border: var(--border-width) solid var(--color-border);
            padding: var(--space-md);
            position: relative;
        }

        .token-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, var(--color-primary), var(--color-secondary));
        }

        .token-label {
            font-family: var(--font-heading);
            font-size: 0.8rem;
            color: var(--color-primary);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: var(--space-xs);
            font-weight: 700;
        }

        .token-value {
            font-family: monospace;
            font-size: 0.85rem;
            color: var(--color-text);
            word-break: break-all;
        }

        /* Navigation */
        .navigation {
            position: fixed;
            bottom: var(--space-md);
            right: var(--space-md);
            display: flex;
            gap: var(--space-sm);
            z-index: 100;
        }

        .nav-btn {
            width: 50px;
            height: 50px;
            background: var(--color-primary);
            border: var(--border-width) solid var(--color-background);
            color: var(--color-background);
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-elevated);
            position: relative;
            transition: all 0.2s ease;
        }

        .nav-btn::before {
            content: '';
            position: absolute;
            inset: -4px;
            border: 1px solid var(--color-primary);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .nav-btn:hover {
            background: var(--color-accent);
            transform: translateY(-2px);
            box-shadow:
                0 6px 12px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(212, 175, 55, 0.4);
        }

        .nav-btn:hover::before {
            opacity: 1;
        }

        .nav-btn:focus {
            outline: 2px solid var(--color-primary);
            outline-offset: 4px;
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Responsive */
        @media (max-width: 640px) {
            .calculator-frame {
                margin: var(--space-sm);
                padding: var(--space-md);
            }

            .display-main {
                font-size: 2rem;
            }

            .btn {
                font-size: 1.1rem;
                min-height: 50px;
            }

            .token-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Loading State */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Error State */
        .error {
            color: var(--color-error);
            animation: pulse 0.5s ease;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
    </style>
</head>
<body>
    <header>
        <h1>Deco Surge</h1>
        <p class="tagline">Art Deco Design with Natural Neutral Tones</p>
    </header>

    <main>
        <div class="calculator-container">
            <div class="calculator-frame">
                <!-- Mode Selector -->
                <div class="mode-indicator">
                    <button class="mode-badge active" onclick="setMode('standard')">Standard</button>
                    <button class="mode-badge" onclick="setMode('dosage')">Dosage</button>
                    <button class="mode-badge" onclick="setMode('bmi')">BMI</button>
                </div>

                <!-- Display -->
                <div class="display-container">
                    <div class="display-memory" id="memory-indicator"></div>
                    <div class="display-operation" id="operation-display"></div>
                    <div class="display-main" id="main-display">0</div>
                </div>

                <!-- Memory Functions -->
                <div class="memory-row">
                    <button class="btn btn-function" onclick="memoryAction('clear')">MC</button>
                    <button class="btn btn-function" onclick="memoryAction('recall')">MR</button>
                    <button class="btn btn-function" onclick="memoryAction('add')">M+</button>
                    <button class="btn btn-function" onclick="memoryAction('subtract')">M-</button>
                    <button class="btn btn-function" onclick="memoryAction('store')">MS</button>
                </div>

                <!-- Healthcare-Specific Functions -->
                <div class="healthcare-functions">
                    <button class="btn" onclick="convertUnit('kg-lb')" title="Convert kg to lb">kg→lb</button>
                    <button class="btn" onclick="convertUnit('lb-kg')" title="Convert lb to kg">lb→kg</button>
                    <button class="btn" onclick="convertUnit('mg-g')" title="Convert mg to g">mg→g</button>
                    <button class="btn" onclick="convertUnit('ml-oz')" title="Convert mL to oz">mL→oz</button>
                </div>

                <!-- Main Button Grid -->
                <div class="button-grid">
                    <!-- Row 1 -->
                    <button class="btn btn-function" onclick="clearAll()">AC</button>
                    <button class="btn btn-function" onclick="clearEntry()">CE</button>
                    <button class="btn btn-function" onclick="percentage()">%</button>
                    <button class="btn btn-operator" onclick="setOperation('÷')">÷</button>

                    <!-- Row 2 -->
                    <button class="btn" onclick="inputNumber('7')">7</button>
                    <button class="btn" onclick="inputNumber('8')">8</button>
                    <button class="btn" onclick="inputNumber('9')">9</button>
                    <button class="btn btn-operator" onclick="setOperation('×')">×</button>

                    <!-- Row 3 -->
                    <button class="btn" onclick="inputNumber('4')">4</button>
                    <button class="btn" onclick="inputNumber('5')">5</button>
                    <button class="btn" onclick="inputNumber('6')">6</button>
                    <button class="btn btn-operator" onclick="setOperation('-')">−</button>

                    <!-- Row 4 -->
                    <button class="btn" onclick="inputNumber('1')">1</button>
                    <button class="btn" onclick="inputNumber('2')">2</button>
                    <button class="btn" onclick="inputNumber('3')">3</button>
                    <button class="btn btn-operator" onclick="setOperation('+')">+</button>

                    <!-- Row 5 -->
                    <button class="btn btn-zero" onclick="inputNumber('0')">0</button>
                    <button class="btn" onclick="inputDecimal()">.</button>
                    <button class="btn btn-equals" onclick="calculate()">=</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <h2 class="footer-title">Design System Showcase</h2>
            <p class="footer-text">
                This calculator demonstrates the Deco Surge design system, combining Art Deco elegance
                with modern healthcare functionality. The sophisticated geometric patterns, golden accents,
                and stepped borders echo the glamour of the 1920s while maintaining professional precision
                for clinical calculations. Natural neutral tones create a refined dark mode experience
                optimized for extended use in medical environments.
            </p>

            <div class="token-grid">
                <div class="token-card">
                    <div class="token-label">Primary Color</div>
                    <div class="token-value">#d4af37</div>
                </div>
                <div class="token-card">
                    <div class="token-label">Background</div>
                    <div class="token-value">#1a1511</div>
                </div>
                <div class="token-card">
                    <div class="token-label">Heading Font</div>
                    <div class="token-value">Playfair Display</div>
                </div>
                <div class="token-card">
                    <div class="token-label">Border Style</div>
                    <div class="token-value">2px solid stepped</div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Navigation -->
    <div class="navigation">
        <button class="nav-btn" onclick="navigatePrev()" aria-label="Previous design">
            ←
        </button>
        <button class="nav-btn" onclick="navigateNext()" aria-label="Next design">
            →
        </button>
    </div>

    <script>
        // Calculator State
        let currentValue = '0';
        let previousValue = null;
        let operation = null;
        let memory = 0;
        let calculatorMode = 'standard';
        let shouldResetDisplay = false;

        const mainDisplay = document.getElementById('main-display');
        const operationDisplay = document.getElementById('operation-display');
        const memoryIndicator = document.getElementById('memory-indicator');

        // Update Display
        function updateDisplay() {
            mainDisplay.textContent = currentValue;
            if (operation && previousValue !== null) {
                operationDisplay.textContent = `${previousValue} ${operation}`;
            } else {
                operationDisplay.textContent = '';
            }
            updateMemoryIndicator();
        }

        // Memory Indicator
        function updateMemoryIndicator() {
            if (memory !== 0) {
                memoryIndicator.textContent = `Memory: ${memory}`;
            } else {
                memoryIndicator.textContent = '';
            }
        }

        // Input Number
        function inputNumber(num) {
            if (shouldResetDisplay) {
                currentValue = num;
                shouldResetDisplay = false;
            } else {
                if (currentValue === '0') {
                    currentValue = num;
                } else {
                    currentValue += num;
                }
            }
            updateDisplay();
        }

        // Input Decimal
        function inputDecimal() {
            if (shouldResetDisplay) {
                currentValue = '0.';
                shouldResetDisplay = false;
            } else if (!currentValue.includes('.')) {
                currentValue += '.';
            }
            updateDisplay();
        }

        // Set Operation
        function setOperation(op) {
            if (operation !== null && !shouldResetDisplay) {
                calculate();
            }
            previousValue = parseFloat(currentValue);
            operation = op;
            shouldResetDisplay = true;
            updateDisplay();
        }

        // Calculate
        function calculate() {
            if (operation === null || previousValue === null) return;

            const current = parseFloat(currentValue);
            let result;

            switch (operation) {
                case '+':
                    result = previousValue + current;
                    break;
                case '-':
                    result = previousValue - current;
                    break;
                case '×':
                    result = previousValue * current;
                    break;
                case '÷':
                    if (current === 0) {
                        currentValue = 'ERROR';
                        mainDisplay.classList.add('error');
                        setTimeout(() => mainDisplay.classList.remove('error'), 500);
                        operation = null;
                        previousValue = null;
                        updateDisplay();
                        return;
                    }
                    result = previousValue / current;
                    break;
                default:
                    return;
            }

            currentValue = result.toString();
            operation = null;
            previousValue = null;
            shouldResetDisplay = true;
            updateDisplay();
        }

        // Percentage
        function percentage() {
            const current = parseFloat(currentValue);
            currentValue = (current / 100).toString();
            updateDisplay();
        }

        // Clear Functions
        function clearAll() {
            currentValue = '0';
            previousValue = null;
            operation = null;
            shouldResetDisplay = false;
            updateDisplay();
        }

        function clearEntry() {
            currentValue = '0';
            shouldResetDisplay = false;
            updateDisplay();
        }

        // Memory Functions
        function memoryAction(action) {
            const current = parseFloat(currentValue);

            switch (action) {
                case 'clear':
                    memory = 0;
                    break;
                case 'recall':
                    currentValue = memory.toString();
                    shouldResetDisplay = true;
                    break;
                case 'add':
                    memory += current;
                    shouldResetDisplay = true;
                    break;
                case 'subtract':
                    memory -= current;
                    shouldResetDisplay = true;
                    break;
                case 'store':
                    memory = current;
                    shouldResetDisplay = true;
                    break;
            }

            updateDisplay();
        }

        // Healthcare Unit Conversions
        function convertUnit(conversion) {
            const current = parseFloat(currentValue);
            let result;

            switch (conversion) {
                case 'kg-lb':
                    result = current * 2.20462;
                    break;
                case 'lb-kg':
                    result = current / 2.20462;
                    break;
                case 'mg-g':
                    result = current / 1000;
                    break;
                case 'ml-oz':
                    result = current * 0.033814;
                    break;
                default:
                    return;
            }

            currentValue = result.toFixed(4).toString();
            shouldResetDisplay = true;
            updateDisplay();
        }

        // Mode Setting
        function setMode(mode) {
            calculatorMode = mode;

            // Update badge styles
            document.querySelectorAll('.mode-badge').forEach(badge => {
                badge.classList.remove('active');
            });
            event.target.classList.add('active');

            clearAll();
        }

        // Keyboard Support
        document.addEventListener('keydown', (e) => {
            if (e.key >= '0' && e.key <= '9') {
                inputNumber(e.key);
            } else if (e.key === '.') {
                inputDecimal();
            } else if (e.key === '+') {
                setOperation('+');
            } else if (e.key === '-') {
                setOperation('-');
            } else if (e.key === '*') {
                setOperation('×');
            } else if (e.key === '/') {
                e.preventDefault();
                setOperation('÷');
            } else if (e.key === 'Enter' || e.key === '=') {
                e.preventDefault();
                calculate();
            } else if (e.key === 'Escape') {
                clearAll();
            } else if (e.key === 'Backspace') {
                if (currentValue.length > 1) {
                    currentValue = currentValue.slice(0, -1);
                } else {
                    currentValue = '0';
                }
                updateDisplay();
            }
        });

        // Navigation
        const TOTAL_DESIGNS = 250;
        const CURRENT_DESIGN = 118;

        function navigateNext() {
            const next = CURRENT_DESIGN >= TOTAL_DESIGNS ? 1 : CURRENT_DESIGN + 1;
            window.location.href = `design-${next}.html`;
        }

        function navigatePrev() {
            const prev = CURRENT_DESIGN <= 1 ? TOTAL_DESIGNS : CURRENT_DESIGN - 1;
            window.location.href = `design-${prev}.html`;
        }

        // Arrow key navigation

        // Initialize
        updateDisplay();
    </script>
</body>
</html>
