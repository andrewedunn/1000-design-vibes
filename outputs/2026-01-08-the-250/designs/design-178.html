<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clear Urban - The flat way to gaming</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cormorant+Garamond:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">

    <style>
        /*
        DESIGN: Clear Urban - The flat way to gaming
        ABOUTME: This design system implements quiz_interface with flat aesthetics and Art Nouveau organic flourishes.
        ABOUTME: Key characteristics: flowing ornamental dividers, nature-inspired curves, high-contrast flat colors, trustworthy gaming aesthetics

        QUICK START - Copy these variables to apply this design:
        --color-primary: #7C9F35;
        --color-secondary: #C4A962;
        --color-background: #1A1D23;
        --color-surface: #252930;
        --color-surface-elevated: #2E333C;
        --color-text: #E8EBF0;
        --color-text-muted: #9BA3B4;
        --color-accent: #D4AF5D;
        --color-correct: #6FA03D;
        --color-incorrect: #B94949;
        --font-heading: 'Cinzel', serif;
        --font-body: 'Cormorant Garamond', serif;
        --radius-default: 2px;
        --space-unit: 8px;

        AESTHETIC PRINCIPLES:
        1. Flat color blocks with no gradients or shadows maintain clarity and trustworthiness
        2. Art Nouveau organic dividers and ornamental curves add elegance without compromising usability
        3. Nature-inspired flowing lines frame content to create visual hierarchy
        4. High contrast between surface colors ensures readability in gaming contexts
        5. Serif typography adds sophistication while remaining legible for quiz content

        BEST FOR:
        - Gaming trivia and quiz platforms
        - Educational gaming applications
        - Tournament qualification tests
        - Knowledge-based game onboarding
        - Competitive learning platforms
        - Character creation quizzes

        AVOID IF:
        - Need ultra-modern minimalism
        - Require fast-paced action game UI
        - Want playful cartoon aesthetics
        - Need very dense information display

        FUNCTIONAL DIRECTION: quiz_interface
        This design must clearly function as a quiz_interface. Required elements:
        - Question card (prominent, clearly displayed)
        - Answer options (multiple choice with clear selection states)
        - Progress indicator (visual bar showing quiz completion)
        - Timer (countdown display for time-limited questions)
        - Score display (current points/correct answers)

        COLOR PALETTE:
        - Primary green (#7C9F35): Nature-inspired, trustworthy, gaming-appropriate
        - Secondary gold (#C4A962): Art Nouveau metallic accent
        - Dark backgrounds (#1A1D23, #252930): Gaming-friendly dark mode
        - Elevated surfaces (#2E333C): Flat layering without shadows
        - Text colors: High contrast for accessibility

        TYPOGRAPHY:
        - Headings: Cinzel (Art Nouveau-inspired display serif)
        - Body: Cormorant Garamond (elegant, readable transitional serif)
        - Scale: Clear hierarchy for questions vs answers

        LAYOUT STRUCTURE:
        - Fixed header with score and timer
        - Central question card with organic frame
        - Grid of answer options below
        - Bottom progress bar with ornamental endpoints
        - Decorative Art Nouveau flourishes as visual separators
        */

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Colors */
            --color-primary: #7C9F35;
            --color-secondary: #C4A962;
            --color-background: #1A1D23;
            --color-surface: #252930;
            --color-surface-elevated: #2E333C;
            --color-text: #E8EBF0;
            --color-text-muted: #9BA3B4;
            --color-accent: #D4AF5D;
            --color-correct: #6FA03D;
            --color-incorrect: #B94949;
            --color-border: #3A4150;

            /* Typography */
            --font-heading: 'Cinzel', serif;
            --font-body: 'Cormorant Garamond', serif;
            --scale-base: 1rem;
            --scale-small: 0.875rem;
            --scale-large: 1.25rem;
            --scale-xlarge: 1.75rem;
            --scale-xxlarge: 2.25rem;

            /* Spacing */
            --space-unit: 8px;
            --space-xs: calc(var(--space-unit) * 1);
            --space-sm: calc(var(--space-unit) * 2);
            --space-md: calc(var(--space-unit) * 3);
            --space-lg: calc(var(--space-unit) * 4);
            --space-xl: calc(var(--space-unit) * 6);
            --space-xxl: calc(var(--space-unit) * 8);

            /* Shapes */
            --radius-default: 2px;
            --border-width: 2px;

            /* Touch targets */
            --touch-target: 44px;
        }

        body {
            font-family: var(--font-body);
            font-size: var(--scale-base);
            line-height: 1.6;
            color: var(--color-text);
            background-color: var(--color-background);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header with Score and Timer */
        .quiz-header {
            background-color: var(--color-surface);
            border-bottom: var(--border-width) solid var(--color-border);
            padding: var(--space-md) var(--space-lg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .quiz-title {
            font-family: var(--font-heading);
            font-size: var(--scale-large);
            font-weight: 600;
            color: var(--color-primary);
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .quiz-stats {
            display: flex;
            gap: var(--space-xl);
            align-items: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 80px;
        }

        .stat-label {
            font-size: var(--scale-small);
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: var(--space-xs);
        }

        .stat-value {
            font-family: var(--font-heading);
            font-size: var(--scale-xlarge);
            color: var(--color-text);
            font-weight: 700;
        }

        .timer {
            color: var(--color-accent);
        }

        .timer.warning {
            color: var(--color-incorrect);
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Main Quiz Container */
        .quiz-container {
            flex: 1;
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
            padding: var(--space-xxl) var(--space-lg);
            display: flex;
            flex-direction: column;
            gap: var(--space-xl);
        }

        /* Art Nouveau Decorative Divider */
        .ornamental-divider {
            width: 100%;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: var(--space-md) 0;
        }

        .ornamental-divider svg {
            width: 200px;
            height: 40px;
            fill: none;
            stroke: var(--color-secondary);
            stroke-width: 1.5;
            opacity: 0.6;
        }

        /* Question Card */
        .question-card {
            background-color: var(--color-surface);
            border: var(--border-width) solid var(--color-primary);
            border-radius: var(--radius-default);
            padding: var(--space-xl);
            position: relative;
        }

        .question-card::before,
        .question-card::after {
            content: '';
            position: absolute;
            width: 60px;
            height: 60px;
            border: var(--border-width) solid var(--color-secondary);
        }

        .question-card::before {
            top: -10px;
            left: -10px;
            border-right: none;
            border-bottom: none;
            border-radius: var(--radius-default) 0 0 0;
        }

        .question-card::after {
            bottom: -10px;
            right: -10px;
            border-left: none;
            border-top: none;
            border-radius: 0 0 var(--radius-default) 0;
        }

        .question-number {
            font-size: var(--scale-small);
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: var(--space-sm);
            font-family: var(--font-heading);
        }

        .question-text {
            font-size: var(--scale-xlarge);
            font-weight: 500;
            line-height: 1.5;
            color: var(--color-text);
            margin-bottom: var(--space-md);
        }

        .question-category {
            display: inline-block;
            background-color: var(--color-surface-elevated);
            color: var(--color-accent);
            padding: var(--space-xs) var(--space-sm);
            border-radius: var(--radius-default);
            font-size: var(--scale-small);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            border: 1px solid var(--color-border);
        }

        /* Answer Options */
        .answer-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-md);
            margin-top: var(--space-lg);
        }

        .answer-option {
            background-color: var(--color-surface-elevated);
            border: var(--border-width) solid var(--color-border);
            border-radius: var(--radius-default);
            padding: var(--space-md) var(--space-lg);
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
            min-height: var(--touch-target);
            display: flex;
            align-items: center;
            font-size: var(--scale-base);
        }

        .answer-option:hover {
            background-color: var(--color-surface);
            border-color: var(--color-primary);
            transform: translateX(4px);
        }

        .answer-option:focus {
            outline: 3px solid var(--color-accent);
            outline-offset: 2px;
        }

        .answer-option.selected {
            background-color: var(--color-primary);
            border-color: var(--color-primary);
            color: var(--color-background);
        }

        .answer-option.correct {
            background-color: var(--color-correct);
            border-color: var(--color-correct);
            color: var(--color-background);
        }

        .answer-option.incorrect {
            background-color: var(--color-incorrect);
            border-color: var(--color-incorrect);
            color: var(--color-background);
        }

        .answer-option.disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }

        .option-letter {
            font-family: var(--font-heading);
            font-weight: 700;
            font-size: var(--scale-large);
            margin-right: var(--space-md);
            color: var(--color-accent);
        }

        .answer-option.selected .option-letter,
        .answer-option.correct .option-letter,
        .answer-option.incorrect .option-letter {
            color: inherit;
        }

        .option-text {
            flex: 1;
        }

        /* Progress Bar */
        .progress-container {
            margin-top: var(--space-xl);
            padding-top: var(--space-lg);
            border-top: var(--border-width) solid var(--color-border);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-sm);
            font-size: var(--scale-small);
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .progress-bar-track {
            width: 100%;
            height: 12px;
            background-color: var(--color-surface-elevated);
            border: var(--border-width) solid var(--color-border);
            border-radius: var(--radius-default);
            position: relative;
            overflow: hidden;
        }

        .progress-bar-fill {
            height: 100%;
            background-color: var(--color-primary);
            width: 60%;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-bar-fill::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 3px;
            background-color: var(--color-accent);
        }

        /* Navigation Buttons */
        .navigation-buttons {
            display: flex;
            gap: var(--space-md);
            justify-content: center;
            margin-top: var(--space-lg);
        }

        .btn {
            font-family: var(--font-heading);
            font-size: var(--scale-base);
            padding: var(--space-md) var(--space-xl);
            min-height: var(--touch-target);
            border: var(--border-width) solid var(--color-primary);
            background-color: var(--color-primary);
            color: var(--color-background);
            cursor: pointer;
            border-radius: var(--radius-default);
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .btn:hover {
            background-color: transparent;
            color: var(--color-primary);
        }

        .btn:focus {
            outline: 3px solid var(--color-accent);
            outline-offset: 2px;
        }

        .btn-secondary {
            background-color: transparent;
            color: var(--color-text-muted);
            border-color: var(--color-border);
        }

        .btn-secondary:hover {
            background-color: var(--color-surface-elevated);
            border-color: var(--color-text-muted);
            color: var(--color-text);
        }

        .btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Results Summary */
        .results-summary {
            background-color: var(--color-surface);
            border: var(--border-width) solid var(--color-accent);
            border-radius: var(--radius-default);
            padding: var(--space-xl);
            text-align: center;
            margin-top: var(--space-lg);
        }

        .results-summary h2 {
            font-family: var(--font-heading);
            font-size: var(--scale-xxlarge);
            color: var(--color-accent);
            margin-bottom: var(--space-md);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .results-score {
            font-size: var(--scale-xlarge);
            margin: var(--space-lg) 0;
        }

        .results-score strong {
            font-family: var(--font-heading);
            font-size: var(--scale-xxlarge);
            color: var(--color-primary);
        }

        .results-breakdown {
            display: flex;
            justify-content: center;
            gap: var(--space-xl);
            margin-top: var(--space-lg);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--color-border);
        }

        .breakdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .breakdown-value {
            font-family: var(--font-heading);
            font-size: var(--scale-xlarge);
            font-weight: 700;
            margin-bottom: var(--space-xs);
        }

        .breakdown-item.correct .breakdown-value {
            color: var(--color-correct);
        }

        .breakdown-item.incorrect .breakdown-value {
            color: var(--color-incorrect);
        }

        .breakdown-label {
            font-size: var(--scale-small);
            color: var(--color-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .quiz-header {
                flex-direction: column;
                gap: var(--space-md);
                text-align: center;
            }

            .quiz-stats {
                gap: var(--space-lg);
            }

            .quiz-container {
                padding: var(--space-lg) var(--space-md);
            }

            .answer-options {
                grid-template-columns: 1fr;
            }

            .navigation-buttons {
                flex-direction: column;
            }

            .results-breakdown {
                flex-direction: column;
                gap: var(--space-md);
            }
        }

        /* Hidden class for showing/hiding sections */
        .hidden {
            display: none !important;
        }

        /* Keyboard navigation indicator */
        .keyboard-user *:focus {
            outline: 3px solid var(--color-accent);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Quiz Header with Score and Timer -->
    <header class="quiz-header">
        <h1 class="quiz-title">Clear Urban</h1>
        <div class="quiz-stats">
            <div class="stat-item">
                <div class="stat-label">Score</div>
                <div class="stat-value score-display">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Time</div>
                <div class="stat-value timer" id="timer">3:00</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Questions</div>
                <div class="stat-value question-counter">1/10</div>
            </div>
        </div>
    </header>

    <!-- Main Quiz Container -->
    <main class="quiz-container" id="quizContainer">

        <!-- Art Nouveau Ornamental Divider -->
        <div class="ornamental-divider">
            <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg">
                <path d="M10,20 Q30,5 50,20 T90,20 Q95,20 100,15 Q105,20 110,20 T150,20 Q170,5 190,20" />
                <circle cx="100" cy="15" r="4" fill="currentColor" opacity="0.6"/>
                <path d="M95,18 Q97,25 100,30 Q103,25 105,18" />
                <path d="M85,25 Q87,30 90,32" />
                <path d="M115,25 Q113,30 110,32" />
            </svg>
        </div>

        <!-- Question Card -->
        <section class="question-card" id="questionCard">
            <div class="question-number">Question <span id="currentQuestion">1</span> of 10</div>
            <h2 class="question-text" id="questionText">
                In which year was the first video game considered to be the "first" real video game created?
            </h2>
            <span class="question-category">Gaming History</span>
        </section>

        <!-- Answer Options -->
        <section class="answer-options" id="answerOptions" role="radiogroup" aria-labelledby="questionText">
            <button class="answer-option" role="radio" aria-checked="false" data-answer="a">
                <span class="option-letter">A</span>
                <span class="option-text">1958 - Tennis for Two</span>
            </button>
            <button class="answer-option" role="radio" aria-checked="false" data-answer="b">
                <span class="option-letter">B</span>
                <span class="option-text">1962 - Spacewar!</span>
            </button>
            <button class="answer-option" role="radio" aria-checked="false" data-answer="c">
                <span class="option-letter">C</span>
                <span class="option-text">1972 - Pong</span>
            </button>
            <button class="answer-option" role="radio" aria-checked="false" data-answer="d">
                <span class="option-letter">D</span>
                <span class="option-text">1980 - Pac-Man</span>
            </button>
        </section>

        <!-- Progress Bar -->
        <section class="progress-container">
            <div class="progress-label">
                <span>Quiz Progress</span>
                <span><span id="progressPercent">10</span>%</span>
            </div>
            <div class="progress-bar-track">
                <div class="progress-bar-fill" id="progressBar" style="width: 10%"></div>
            </div>
        </section>

        <!-- Navigation Buttons -->
        <nav class="navigation-buttons">
            <button class="btn btn-secondary" id="prevBtn" disabled>Previous</button>
            <button class="btn" id="nextBtn">Next Question</button>
            <button class="btn hidden" id="submitBtn">Submit Quiz</button>
        </nav>

        <!-- Results Summary (Initially Hidden) -->
        <section class="results-summary hidden" id="resultsSection">
            <h2>Quiz Complete!</h2>
            <div class="results-score">
                Your Score: <strong><span id="finalScore">0</span>/10</strong>
            </div>
            <div class="ornamental-divider">
                <svg viewBox="0 0 200 40" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10,20 Q30,5 50,20 T90,20 Q95,20 100,15 Q105,20 110,20 T150,20 Q170,5 190,20" />
                    <circle cx="100" cy="15" r="4" fill="currentColor" opacity="0.6"/>
                </svg>
            </div>
            <div class="results-breakdown">
                <div class="breakdown-item correct">
                    <div class="breakdown-value" id="correctCount">0</div>
                    <div class="breakdown-label">Correct</div>
                </div>
                <div class="breakdown-item incorrect">
                    <div class="breakdown-value" id="incorrectCount">0</div>
                    <div class="breakdown-label">Incorrect</div>
                </div>
                <div class="breakdown-item">
                    <div class="breakdown-value" id="accuracyPercent">0%</div>
                    <div class="breakdown-label">Accuracy</div>
                </div>
            </div>
            <div class="navigation-buttons" style="margin-top: var(--space-xl);">
                <button class="btn" id="retryBtn">Retry Quiz</button>
                <button class="btn btn-secondary" id="reviewBtn">Review Answers</button>
            </div>
        </section>
    </main>

    <script>
        // Quiz data
        const quizData = [
            {
                question: "In which year was the first video game considered to be the 'first' real video game created?",
                category: "Gaming History",
                options: [
                    "1958 - Tennis for Two",
                    "1962 - Spacewar!",
                    "1972 - Pong",
                    "1980 - Pac-Man"
                ],
                correct: 0
            },
            {
                question: "Which game franchise features the character 'Master Chief'?",
                category: "Game Characters",
                options: [
                    "Call of Duty",
                    "Halo",
                    "Destiny",
                    "Mass Effect"
                ],
                correct: 1
            },
            {
                question: "What is the best-selling video game of all time?",
                category: "Gaming Records",
                options: [
                    "Grand Theft Auto V",
                    "Tetris",
                    "Minecraft",
                    "Wii Sports"
                ],
                correct: 2
            },
            {
                question: "Which company developed the game 'The Witcher 3: Wild Hunt'?",
                category: "Game Studios",
                options: [
                    "Bethesda",
                    "BioWare",
                    "CD Projekt Red",
                    "Ubisoft"
                ],
                correct: 2
            },
            {
                question: "In what year was the Nintendo Entertainment System (NES) first released in North America?",
                category: "Gaming History",
                options: [
                    "1983",
                    "1985",
                    "1987",
                    "1989"
                ],
                correct: 1
            },
            {
                question: "Which game introduced the 'Battle Royale' genre to mainstream gaming?",
                category: "Game Genres",
                options: [
                    "Fortnite",
                    "PUBG (PlayerUnknown's Battlegrounds)",
                    "Apex Legends",
                    "H1Z1"
                ],
                correct: 1
            },
            {
                question: "What is the maximum level a character can reach in World of Warcraft's original release?",
                category: "MMORPGs",
                options: [
                    "50",
                    "60",
                    "70",
                    "80"
                ],
                correct: 1
            },
            {
                question: "Which game engine is used to create Fortnite?",
                category: "Game Development",
                options: [
                    "Unity",
                    "CryEngine",
                    "Unreal Engine",
                    "Frostbite"
                ],
                correct: 2
            },
            {
                question: "In the Legend of Zelda series, what is the name of Link's horse?",
                category: "Game Lore",
                options: [
                    "Shadowfax",
                    "Epona",
                    "Roach",
                    "Agro"
                ],
                correct: 1
            },
            {
                question: "Which game won 'Game of the Year' at The Game Awards 2020?",
                category: "Gaming Awards",
                options: [
                    "Ghost of Tsushima",
                    "Animal Crossing: New Horizons",
                    "The Last of Us Part II",
                    "Hades"
                ],
                correct: 2
            }
        ];

        // Quiz state
        let currentQuestionIndex = 0;
        let score = 0;
        let userAnswers = [];
        let timeRemaining = 180; // 3 minutes
        let timerInterval;
        let selectedAnswer = null;

        // DOM elements
        const questionText = document.getElementById('questionText');
        const questionCategory = document.querySelector('.question-category');
        const currentQuestionSpan = document.getElementById('currentQuestion');
        const answerOptions = document.getElementById('answerOptions');
        const progressBar = document.getElementById('progressBar');
        const progressPercent = document.getElementById('progressPercent');
        const scoreDisplay = document.querySelector('.score-display');
        const questionCounter = document.querySelector('.question-counter');
        const timerDisplay = document.getElementById('timer');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const quizContainer = document.getElementById('quizContainer');
        const resultsSection = document.getElementById('resultsSection');
        const finalScore = document.getElementById('finalScore');
        const correctCount = document.getElementById('correctCount');
        const incorrectCount = document.getElementById('incorrectCount');
        const accuracyPercent = document.getElementById('accuracyPercent');
        const retryBtn = document.getElementById('retryBtn');
        const reviewBtn = document.getElementById('reviewBtn');

        // Initialize quiz
        function initQuiz() {
            loadQuestion();
            startTimer();
            setupEventListeners();
            detectKeyboardUser();
        }

        // Load current question
        function loadQuestion() {
            const question = quizData[currentQuestionIndex];
            questionText.textContent = question.question;
            questionCategory.textContent = question.category;
            currentQuestionSpan.textContent = currentQuestionIndex + 1;
            questionCounter.textContent = `${currentQuestionIndex + 1}/10`;

            // Update progress
            const progress = ((currentQuestionIndex + 1) / quizData.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressPercent.textContent = Math.round(progress);

            // Load answer options
            const optionButtons = answerOptions.querySelectorAll('.answer-option');
            optionButtons.forEach((btn, index) => {
                btn.querySelector('.option-text').textContent = question.options[index];
                btn.classList.remove('selected', 'correct', 'incorrect');
                btn.disabled = false;
                btn.setAttribute('aria-checked', 'false');

                // Restore previous selection if exists
                if (userAnswers[currentQuestionIndex] !== undefined && userAnswers[currentQuestionIndex] === index) {
                    btn.classList.add('selected');
                    btn.setAttribute('aria-checked', 'true');
                    selectedAnswer = index;
                }
            });

            // Update button states
            prevBtn.disabled = currentQuestionIndex === 0;

            if (currentQuestionIndex === quizData.length - 1) {
                nextBtn.classList.add('hidden');
                submitBtn.classList.remove('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
        }

        // Start timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;

                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                timerDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;

                // Warning state
                if (timeRemaining <= 30) {
                    timerDisplay.classList.add('warning');
                }

                // Time's up
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz();
                }
            }, 1000);
        }

        // Setup event listeners
        function setupEventListeners() {
            // Answer selection
            answerOptions.addEventListener('click', (e) => {
                const option = e.target.closest('.answer-option');
                if (option && !option.disabled) {
                    selectAnswer(option);
                }
            });

            // Navigation buttons
            nextBtn.addEventListener('click', () => {
                if (selectedAnswer !== null) {
                    userAnswers[currentQuestionIndex] = selectedAnswer;
                    currentQuestionIndex++;
                    selectedAnswer = null;
                    loadQuestion();
                }
            });

            prevBtn.addEventListener('click', () => {
                currentQuestionIndex--;
                selectedAnswer = userAnswers[currentQuestionIndex] !== undefined ? userAnswers[currentQuestionIndex] : null;
                loadQuestion();
            });

            submitBtn.addEventListener('click', submitQuiz);
            retryBtn.addEventListener('click', retryQuiz);
            reviewBtn.addEventListener('click', reviewAnswers);

            // Keyboard navigation for arrow keys (design navigation)
            document.addEventListener('keydown', handleKeyboardNavigation);
        }

        // Select answer
        function selectAnswer(option) {
            // Remove previous selection
            answerOptions.querySelectorAll('.answer-option').forEach(btn => {
                btn.classList.remove('selected');
                btn.setAttribute('aria-checked', 'false');
            });

            // Add new selection
            option.classList.add('selected');
            option.setAttribute('aria-checked', 'true');

            const options = Array.from(answerOptions.querySelectorAll('.answer-option'));
            selectedAnswer = options.indexOf(option);
        }

        // Submit quiz
        function submitQuiz() {
            // Save last answer if selected
            if (selectedAnswer !== null) {
                userAnswers[currentQuestionIndex] = selectedAnswer;
            }

            // Calculate score
            score = 0;
            quizData.forEach((question, index) => {
                if (userAnswers[index] === question.correct) {
                    score++;
                }
            });

            // Stop timer
            clearInterval(timerInterval);

            // Show results
            showResults();
        }

        // Show results
        function showResults() {
            quizContainer.querySelector('.question-card').classList.add('hidden');
            answerOptions.classList.add('hidden');
            document.querySelector('.progress-container').classList.add('hidden');
            document.querySelector('.navigation-buttons').classList.add('hidden');

            resultsSection.classList.remove('hidden');

            finalScore.textContent = score;
            correctCount.textContent = score;
            incorrectCount.textContent = quizData.length - score;
            const accuracy = Math.round((score / quizData.length) * 100);
            accuracyPercent.textContent = `${accuracy}%`;
            scoreDisplay.textContent = score;
        }

        // Retry quiz
        function retryQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = [];
            timeRemaining = 180;
            selectedAnswer = null;

            quizContainer.querySelector('.question-card').classList.remove('hidden');
            answerOptions.classList.remove('hidden');
            document.querySelector('.progress-container').classList.remove('hidden');
            document.querySelector('.navigation-buttons').classList.remove('hidden');
            resultsSection.classList.add('hidden');

            scoreDisplay.textContent = '0';
            timerDisplay.classList.remove('warning');

            loadQuestion();
            startTimer();
        }

        // Review answers
        function reviewAnswers() {
            currentQuestionIndex = 0;
            selectedAnswer = userAnswers[0];

            quizContainer.querySelector('.question-card').classList.remove('hidden');
            answerOptions.classList.remove('hidden');
            document.querySelector('.progress-container').classList.remove('hidden');
            document.querySelector('.navigation-buttons').classList.remove('hidden');
            resultsSection.classList.add('hidden');

            loadQuestion();

            // Show correct/incorrect states
            const optionButtons = answerOptions.querySelectorAll('.answer-option');
            optionButtons.forEach((btn, index) => {
                btn.disabled = true;
                if (index === quizData[currentQuestionIndex].correct) {
                    btn.classList.add('correct');
                }
                if (userAnswers[currentQuestionIndex] === index && index !== quizData[currentQuestionIndex].correct) {
                    btn.classList.add('incorrect');
                }
            });

            nextBtn.textContent = 'Next';
            submitBtn.classList.add('hidden');
            nextBtn.classList.remove('hidden');
        }

        // Keyboard navigation for design browsing (arrow keys)
        function handleKeyboardNavigation(e) {
            const TOTAL = 250;
            const CURRENT = 178;

            if (e.key === 'ArrowLeft' && CURRENT > 1) {
                window.location.href = `design-${CURRENT - 1}.html`;
            } else if (e.key === 'ArrowRight' && CURRENT < TOTAL) {
                window.location.href = `design-${CURRENT + 1}.html`;
            }
        }

        // Detect keyboard navigation for accessibility
        function detectKeyboardUser() {
            document.body.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') {
                    document.body.classList.add('keyboard-user');
                }
            });

            document.body.addEventListener('mousedown', () => {
                document.body.classList.remove('keyboard-user');
            });
        }

        // Initialize on page load
        initQuiz();
    </script>
</body>
</html>
