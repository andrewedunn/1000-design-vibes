<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban Pewter - Natural vibes for real estate</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cormorant:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        /*
        DESIGN: Urban Pewter - Natural vibes for real estate
        ABOUTME: An Art Nouveau-inspired color picker for real estate branding, featuring organic flowing forms,
        nature-inspired ornamentation, and elegant typography with a serious professional tone.

        CSS VARIABLES:
        --color-primary: #5A7F6F (sage green, natural and grounding)
        --color-background: #F8F6F1 (warm ivory, Art Nouveau favorite)
        --color-surface: #FFFFFF (crisp white surfaces)
        --color-text: #2C3E3A (deep forest green)
        --color-text-muted: #6B7F77 (muted sage)
        --color-accent: #8B7355 (pewter brown)
        --color-highlight: #C9B896 (warm gold)
        --font-heading: 'Cinzel', serif (elegant Art Nouveau feel)
        --font-body: 'Cormorant', serif (flowing and organic)
        --space-unit: 1rem
        --radius-default: 8px
        --shadow-default: 0 4px 12px rgba(44, 62, 58, 0.08)

        DESIGN RATIONALE:
        Art Nouveau emphasized natural forms, flowing lines, and organic ornamentation. This color picker combines
        those principles with the serious professionalism required for real estate. The palette draws from natural
        materials (stone, wood, foliage) while the layout features characteristic Art Nouveau curves and decorative
        elements. The serious tone is maintained through restrained color choices, clear typography hierarchy, and
        functional elegance rather than frivolous decoration.
        -->

        */
        :root {
            --color-primary: #5A7F6F;
            --color-background: #F8F6F1;
            --color-surface: #FFFFFF;
            --color-text: #2C3E3A;
            --color-text-muted: #6B7F77;
            --color-accent: #8B7355;
            --color-highlight: #C9B896;
            --font-heading: 'Cinzel', serif;
            --font-body: 'Cormorant', serif;
            --space-unit: 1rem;
            --radius-default: 8px;
            --shadow-default: 0 4px 12px rgba(44, 62, 58, 0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            color: var(--color-text);
            background: var(--color-background);
            line-height: 1.6;
            min-height: 100vh;
            padding: calc(var(--space-unit) * 2);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Art Nouveau Header with Ornamental Elements */
        header {
            text-align: center;
            margin-bottom: calc(var(--space-unit) * 4);
            position: relative;
            padding-bottom: calc(var(--space-unit) * 2);
        }

        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--color-primary), transparent);
        }

        h1 {
            font-family: var(--font-heading);
            font-size: 3rem;
            font-weight: 700;
            color: var(--color-text);
            margin-bottom: calc(var(--space-unit) * 0.5);
            letter-spacing: 0.05em;
        }

        .tagline {
            font-size: 1.25rem;
            color: var(--color-text-muted);
            font-style: italic;
            font-weight: 300;
        }

        /* Ornamental Divider */
        .ornament {
            margin: calc(var(--space-unit) * 3) auto;
            width: 120px;
            height: 60px;
            position: relative;
        }

        .ornament::before,
        .ornament::after {
            content: '';
            position: absolute;
            background: var(--color-primary);
        }

        .ornament::before {
            width: 100%;
            height: 2px;
            top: 50%;
            left: 0;
        }

        .ornament::after {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        /* Main Color Picker Layout */
        .picker-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: calc(var(--space-unit) * 3);
            margin-bottom: calc(var(--space-unit) * 4);
        }

        .picker-main {
            background: var(--color-surface);
            border-radius: calc(var(--radius-default) * 2);
            padding: calc(var(--space-unit) * 3);
            box-shadow: var(--shadow-default);
            border: 1px solid rgba(90, 127, 111, 0.1);
        }

        .picker-main h2 {
            font-family: var(--font-heading);
            font-size: 1.75rem;
            margin-bottom: calc(var(--space-unit) * 2);
            color: var(--color-text);
            display: flex;
            align-items: center;
            gap: calc(var(--space-unit) * 0.75);
        }

        .picker-main h2::before {
            content: '';
            width: 4px;
            height: 28px;
            background: var(--color-primary);
            border-radius: 2px;
        }

        /* Color Canvas with Art Nouveau Border */
        .color-canvas {
            position: relative;
            width: 100%;
            aspect-ratio: 4/3;
            background: linear-gradient(180deg, #FFFFFF 0%, #000000 100%);
            border-radius: var(--radius-default);
            margin-bottom: calc(var(--space-unit) * 2);
            cursor: crosshair;
            overflow: hidden;
            border: 3px solid var(--color-primary);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .color-canvas::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, #FFFFFF 0%, transparent 100%);
            pointer-events: none;
        }

        .color-cursor {
            position: absolute;
            width: 20px;
            height: 20px;
            border: 3px solid white;
            border-radius: 50%;
            pointer-events: none;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.3), 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        /* Hue Slider with Organic Styling */
        .hue-slider-container {
            margin-bottom: calc(var(--space-unit) * 2);
        }

        .hue-slider-container label {
            display: block;
            font-size: 1rem;
            margin-bottom: calc(var(--space-unit) * 0.75);
            color: var(--color-text);
            font-weight: 500;
        }

        .hue-slider {
            width: 100%;
            height: 40px;
            border-radius: 20px;
            background: linear-gradient(90deg,
                hsl(0, 100%, 50%) 0%,
                hsl(60, 100%, 50%) 16.66%,
                hsl(120, 100%, 50%) 33.33%,
                hsl(180, 100%, 50%) 50%,
                hsl(240, 100%, 50%) 66.66%,
                hsl(300, 100%, 50%) 83.33%,
                hsl(360, 100%, 50%) 100%
            );
            position: relative;
            cursor: pointer;
            border: 3px solid var(--color-primary);
            box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .hue-slider-thumb {
            position: absolute;
            width: 32px;
            height: 32px;
            background: white;
            border: 3px solid var(--color-text);
            border-radius: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            cursor: grab;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }

        .hue-slider-thumb:active {
            cursor: grabbing;
        }

        /* Color Values Display */
        .color-values {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-unit);
            margin-bottom: calc(var(--space-unit) * 2);
        }

        .color-value {
            background: var(--color-background);
            padding: var(--space-unit);
            border-radius: var(--radius-default);
            border: 1px solid rgba(90, 127, 111, 0.15);
        }

        .color-value label {
            display: block;
            font-size: 0.875rem;
            color: var(--color-text-muted);
            margin-bottom: calc(var(--space-unit) * 0.25);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 500;
        }

        .color-value input {
            width: 100%;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            padding: calc(var(--space-unit) * 0.5);
            border: 1px solid rgba(90, 127, 111, 0.3);
            border-radius: 4px;
            background: white;
            color: var(--color-text);
            transition: all 0.2s ease;
        }

        .color-value input:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(90, 127, 111, 0.1);
        }

        /* Sidebar Palette */
        .palette-sidebar {
            display: flex;
            flex-direction: column;
            gap: calc(var(--space-unit) * 2);
        }

        .current-color-display {
            background: var(--color-surface);
            border-radius: calc(var(--radius-default) * 2);
            padding: calc(var(--space-unit) * 2);
            box-shadow: var(--shadow-default);
            border: 1px solid rgba(90, 127, 111, 0.1);
        }

        .current-color-display h3 {
            font-family: var(--font-heading);
            font-size: 1.25rem;
            margin-bottom: var(--space-unit);
            color: var(--color-text);
        }

        .current-color-swatch {
            width: 100%;
            aspect-ratio: 1;
            border-radius: var(--radius-default);
            border: 3px solid var(--color-primary);
            margin-bottom: var(--space-unit);
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .saved-palette {
            background: var(--color-surface);
            border-radius: calc(var(--radius-default) * 2);
            padding: calc(var(--space-unit) * 2);
            box-shadow: var(--shadow-default);
            border: 1px solid rgba(90, 127, 111, 0.1);
        }

        .saved-palette h3 {
            font-family: var(--font-heading);
            font-size: 1.25rem;
            margin-bottom: var(--space-unit);
            color: var(--color-text);
        }

        .palette-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: calc(var(--space-unit) * 0.75);
        }

        .palette-swatch {
            aspect-ratio: 1;
            border-radius: calc(var(--radius-default) * 0.75);
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .palette-swatch:hover {
            border-color: var(--color-primary);
            transform: scale(1.05);
        }

        .palette-swatch:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(90, 127, 111, 0.2);
        }

        /* Action Buttons with Art Nouveau Styling */
        .actions {
            display: flex;
            gap: var(--space-unit);
            flex-wrap: wrap;
        }

        button {
            font-family: var(--font-heading);
            padding: calc(var(--space-unit) * 0.75) calc(var(--space-unit) * 1.5);
            border: 2px solid var(--color-primary);
            background: var(--color-primary);
            color: white;
            border-radius: var(--radius-default);
            cursor: pointer;
            font-size: 1rem;
            letter-spacing: 0.05em;
            transition: all 0.2s ease;
            text-transform: uppercase;
            font-weight: 600;
        }

        button:hover {
            background: var(--color-text);
            border-color: var(--color-text);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(44, 62, 58, 0.2);
        }

        button:active {
            transform: translateY(0);
        }

        button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(90, 127, 111, 0.3);
        }

        button.secondary {
            background: transparent;
            color: var(--color-primary);
        }

        button.secondary:hover {
            background: var(--color-background);
            border-color: var(--color-text);
            color: var(--color-text);
        }

        /* Property Harmony Section */
        .harmony-section {
            background: var(--color-surface);
            border-radius: calc(var(--radius-default) * 2);
            padding: calc(var(--space-unit) * 3);
            box-shadow: var(--shadow-default);
            border: 1px solid rgba(90, 127, 111, 0.1);
            margin-bottom: calc(var(--space-unit) * 3);
        }

        .harmony-section h2 {
            font-family: var(--font-heading);
            font-size: 1.75rem;
            margin-bottom: calc(var(--space-unit) * 2);
            color: var(--color-text);
            display: flex;
            align-items: center;
            gap: calc(var(--space-unit) * 0.75);
        }

        .harmony-section h2::before {
            content: '';
            width: 4px;
            height: 28px;
            background: var(--color-accent);
            border-radius: 2px;
        }

        .harmony-schemes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: calc(var(--space-unit) * 1.5);
        }

        .harmony-card {
            background: var(--color-background);
            padding: calc(var(--space-unit) * 1.5);
            border-radius: var(--radius-default);
            border: 1px solid rgba(90, 127, 111, 0.15);
        }

        .harmony-card h4 {
            font-family: var(--font-heading);
            font-size: 1rem;
            margin-bottom: var(--space-unit);
            color: var(--color-text);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .harmony-colors {
            display: flex;
            gap: calc(var(--space-unit) * 0.5);
            margin-bottom: var(--space-unit);
        }

        .harmony-color {
            flex: 1;
            height: 60px;
            border-radius: calc(var(--radius-default) * 0.5);
            border: 2px solid rgba(90, 127, 111, 0.2);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .harmony-color:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        /* Footer */
        footer {
            text-align: center;
            padding-top: calc(var(--space-unit) * 3);
            border-top: 1px solid rgba(90, 127, 111, 0.2);
            color: var(--color-text-muted);
            font-size: 0.95rem;
        }

        footer p {
            margin-bottom: calc(var(--space-unit) * 0.5);
        }

        .keyboard-hint {
            font-style: italic;
            font-size: 0.875rem;
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .picker-container {
                grid-template-columns: 1fr;
            }

            .color-values {
                grid-template-columns: 1fr;
            }

            .harmony-schemes {
                grid-template-columns: 1fr;
            }

            .palette-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Focus Visible */
        *:focus-visible {
            outline: 3px solid var(--color-primary);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Urban Pewter</h1>
            <p class="tagline">Natural vibes for real estate</p>
        </header>

        <div class="ornament"></div>

        <div class="picker-container">
            <div class="picker-main">
                <h2>Color Selection</h2>

                <div class="color-canvas" id="colorCanvas">
                    <div class="color-cursor" id="colorCursor"></div>
                </div>

                <div class="hue-slider-container">
                    <label for="hueSlider">Hue Spectrum</label>
                    <div class="hue-slider" id="hueSlider">
                        <div class="hue-slider-thumb" id="hueThumb"></div>
                    </div>
                </div>

                <div class="color-values">
                    <div class="color-value">
                        <label>Hex</label>
                        <input type="text" id="hexValue" value="#5A7F6F" readonly>
                    </div>
                    <div class="color-value">
                        <label>RGB</label>
                        <input type="text" id="rgbValue" value="90, 127, 111" readonly>
                    </div>
                    <div class="color-value">
                        <label>HSL</label>
                        <input type="text" id="hslValue" value="155°, 17%, 43%" readonly>
                    </div>
                </div>

                <div class="actions">
                    <button id="saveColor">Add to Palette</button>
                    <button class="secondary" id="copyHex">Copy Hex</button>
                    <button class="secondary" id="copyRgb">Copy RGB</button>
                </div>
            </div>

            <div class="palette-sidebar">
                <div class="current-color-display">
                    <h3>Current Color</h3>
                    <div class="current-color-swatch" id="currentSwatch" style="background-color: #5A7F6F;"></div>
                </div>

                <div class="saved-palette">
                    <h3>Saved Palette</h3>
                    <div class="palette-grid" id="paletteGrid">
                        <div class="palette-swatch" style="background-color: #5A7F6F;" tabindex="0" data-color="#5A7F6F"></div>
                        <div class="palette-swatch" style="background-color: #8B7355;" tabindex="0" data-color="#8B7355"></div>
                        <div class="palette-swatch" style="background-color: #C9B896;" tabindex="0" data-color="#C9B896"></div>
                        <div class="palette-swatch" style="background-color: #2C3E3A;" tabindex="0" data-color="#2C3E3A"></div>
                        <div class="palette-swatch" style="background-color: #F8F6F1;" tabindex="0" data-color="#F8F6F1"></div>
                        <div class="palette-swatch" style="background-color: #6B7F77;" tabindex="0" data-color="#6B7F77"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="harmony-section">
            <h2>Property Harmonies</h2>
            <div class="harmony-schemes">
                <div class="harmony-card">
                    <h4>Complementary</h4>
                    <div class="harmony-colors" id="complementary"></div>
                </div>
                <div class="harmony-card">
                    <h4>Analogous</h4>
                    <div class="harmony-colors" id="analogous"></div>
                </div>
                <div class="harmony-card">
                    <h4>Triadic</h4>
                    <div class="harmony-colors" id="triadic"></div>
                </div>
                <div class="harmony-card">
                    <h4>Monochromatic</h4>
                    <div class="harmony-colors" id="monochromatic"></div>
                </div>
            </div>
        </div>

        <footer>
            <p>&copy; 2026 Urban Pewter Color Systems</p>
            <p class="keyboard-hint">Use arrow keys or swipe to navigate designs</p>
        </footer>
    </div>

    <script>
        // Color Picker State
        let currentHue = 155;
        let currentSaturation = 50;
        let currentLightness = 50;
        let savedColors = ['#5A7F6F', '#8B7355', '#C9B896', '#2C3E3A', '#F8F6F1', '#6B7F77'];

        // HSL to Hex conversion
        function hslToHex(h, s, l) {
            l /= 100;
            const a = s * Math.min(l, 1 - l) / 100;
            const f = n => {
                const k = (n + h / 30) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color).toString(16).padStart(2, '0');
            };
            return `#${f(0)}${f(8)}${f(4)}`.toUpperCase();
        }

        // HSL to RGB
        function hslToRgb(h, s, l) {
            l /= 100;
            const a = s * Math.min(l, 1 - l) / 100;
            const f = n => {
                const k = (n + h / 30) % 12;
                const color = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
                return Math.round(255 * color);
            };
            return `${f(0)}, ${f(8)}, ${f(4)}`;
        }

        // Update all color displays
        function updateColor() {
            const hex = hslToHex(currentHue, currentSaturation, currentLightness);
            const rgb = hslToRgb(currentHue, currentSaturation, currentLightness);
            const hsl = `${Math.round(currentHue)}°, ${Math.round(currentSaturation)}%, ${Math.round(currentLightness)}%`;

            document.getElementById('hexValue').value = hex;
            document.getElementById('rgbValue').value = rgb;
            document.getElementById('hslValue').value = hsl;
            document.getElementById('currentSwatch').style.backgroundColor = hex;

            updateHarmonyColors();
        }

        // Color Canvas
        const canvas = document.getElementById('colorCanvas');
        const cursor = document.getElementById('colorCursor');
        let canvasRect = canvas.getBoundingClientRect();

        function updateCanvasGradient() {
            const baseColor = `hsl(${currentHue}, 100%, 50%)`;
            canvas.style.background = `linear-gradient(180deg, #FFFFFF 0%, #000000 100%)`;
        }

        function handleCanvasClick(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            currentSaturation = (x / rect.width) * 100;
            currentLightness = 100 - (y / rect.height) * 100;

            cursor.style.left = `${x}px`;
            cursor.style.top = `${y}px`;

            updateColor();
        }

        canvas.addEventListener('click', handleCanvasClick);

        let isCanvasDragging = false;
        canvas.addEventListener('mousedown', () => isCanvasDragging = true);
        document.addEventListener('mouseup', () => isCanvasDragging = false);
        canvas.addEventListener('mousemove', (e) => {
            if (isCanvasDragging) handleCanvasClick(e);
        });

        // Hue Slider
        const hueSlider = document.getElementById('hueSlider');
        const hueThumb = document.getElementById('hueThumb');

        function updateHueThumb() {
            const position = (currentHue / 360) * 100;
            hueThumb.style.left = `${position}%`;
            updateCanvasGradient();
        }

        function handleHueClick(e) {
            const rect = hueSlider.getBoundingClientRect();
            const x = e.clientX - rect.left;
            currentHue = (x / rect.width) * 360;
            updateHueThumb();
            updateColor();
        }

        hueSlider.addEventListener('click', handleHueClick);

        let isHueDragging = false;
        hueSlider.addEventListener('mousedown', () => isHueDragging = true);
        document.addEventListener('mouseup', () => isHueDragging = false);
        hueSlider.addEventListener('mousemove', (e) => {
            if (isHueDragging) handleHueClick(e);
        });

        // Save Color
        document.getElementById('saveColor').addEventListener('click', () => {
            const hex = document.getElementById('hexValue').value;
            if (savedColors.length < 12 && !savedColors.includes(hex)) {
                savedColors.push(hex);
                updatePaletteGrid();
            }
        });

        // Copy buttons
        document.getElementById('copyHex').addEventListener('click', () => {
            navigator.clipboard.writeText(document.getElementById('hexValue').value);
        });

        document.getElementById('copyRgb').addEventListener('click', () => {
            const rgb = document.getElementById('rgbValue').value;
            navigator.clipboard.writeText(`rgb(${rgb})`);
        });

        // Palette Grid
        function updatePaletteGrid() {
            const grid = document.getElementById('paletteGrid');
            grid.innerHTML = '';
            savedColors.forEach(color => {
                const swatch = document.createElement('div');
                swatch.className = 'palette-swatch';
                swatch.style.backgroundColor = color;
                swatch.tabIndex = 0;
                swatch.dataset.color = color;
                swatch.addEventListener('click', () => loadColorFromHex(color));
                swatch.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') loadColorFromHex(color);
                });
                grid.appendChild(swatch);
            });
        }

        function loadColorFromHex(hex) {
            // Simple hex to HSL conversion (approximate)
            const r = parseInt(hex.substr(1, 2), 16) / 255;
            const g = parseInt(hex.substr(3, 2), 16) / 255;
            const b = parseInt(hex.substr(5, 2), 16) / 255;

            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);

                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }

            currentHue = h * 360;
            currentSaturation = s * 100;
            currentLightness = l * 100;

            updateHueThumb();
            updateColor();

            // Update cursor position
            const rect = canvas.getBoundingClientRect();
            cursor.style.left = `${(currentSaturation / 100) * rect.width}px`;
            cursor.style.top = `${((100 - currentLightness) / 100) * rect.height}px`;
        }

        // Harmony Colors
        function updateHarmonyColors() {
            // Complementary
            const comp = document.getElementById('complementary');
            comp.innerHTML = '';
            [0, 180].forEach(offset => {
                const div = document.createElement('div');
                div.className = 'harmony-color';
                const h = (currentHue + offset) % 360;
                div.style.backgroundColor = hslToHex(h, currentSaturation, currentLightness);
                div.addEventListener('click', () => {
                    currentHue = h;
                    updateHueThumb();
                    updateColor();
                });
                comp.appendChild(div);
            });

            // Analogous
            const analog = document.getElementById('analogous');
            analog.innerHTML = '';
            [-30, 0, 30].forEach(offset => {
                const div = document.createElement('div');
                div.className = 'harmony-color';
                const h = (currentHue + offset + 360) % 360;
                div.style.backgroundColor = hslToHex(h, currentSaturation, currentLightness);
                div.addEventListener('click', () => {
                    currentHue = h;
                    updateHueThumb();
                    updateColor();
                });
                analog.appendChild(div);
            });

            // Triadic
            const triadic = document.getElementById('triadic');
            triadic.innerHTML = '';
            [0, 120, 240].forEach(offset => {
                const div = document.createElement('div');
                div.className = 'harmony-color';
                const h = (currentHue + offset) % 360;
                div.style.backgroundColor = hslToHex(h, currentSaturation, currentLightness);
                div.addEventListener('click', () => {
                    currentHue = h;
                    updateHueThumb();
                    updateColor();
                });
                triadic.appendChild(div);
            });

            // Monochromatic
            const mono = document.getElementById('monochromatic');
            mono.innerHTML = '';
            [30, 50, 70].forEach(lightnessVariant => {
                const div = document.createElement('div');
                div.className = 'harmony-color';
                div.style.backgroundColor = hslToHex(currentHue, currentSaturation, lightnessVariant);
                div.addEventListener('click', () => {
                    currentLightness = lightnessVariant;
                    updateColor();
                });
                mono.appendChild(div);
            });
        }

        // Initialize
        updateHueThumb();
        updateColor();
        updatePaletteGrid();

        // Window resize handler
        window.addEventListener('resize', () => {
            canvasRect = canvas.getBoundingClientRect();
        });
    </script>

    <script>
    (function() {
        const TOTAL = 100;
        const CURRENT = 22;

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight') window.location.href = `design-${CURRENT === TOTAL ? 1 : CURRENT + 1}.html`;
            if (e.key === 'ArrowLeft') window.location.href = `design-${CURRENT === 1 ? TOTAL : CURRENT - 1}.html`;
        });

        let startX;
        document.addEventListener('touchstart', e => startX = e.touches[0].clientX);
        document.addEventListener('touchend', e => {
            const diff = startX - e.changedTouches[0].clientX;
            if (Math.abs(diff) > 50) {
                window.location.href = diff > 0
                    ? `design-${CURRENT === TOTAL ? 1 : CURRENT + 1}.html`
                    : `design-${CURRENT === 1 ? TOTAL : CURRENT - 1}.html`;
            }
        });
    })();
    </script>
</body>
</html>
